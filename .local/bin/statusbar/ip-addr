#!/bin/bash

FILE="/tmp/ip-addr-polybar-db"
[ ! -f "$FILE" ] && echo "local" > $FILE


get_local_ip() {
	ip route get 8.8.8.8 | awk -F"src " 'NR==1{split($2,a," ");print a[1]}'
}

get_public_ip() {
	dig @resolver1.opendns.com A myip.opendns.com +short -4
}

SELECTED=$(head -n 1 $FILE)
if [ $SELECTED = 'local' ];
then
	get_local_ip
else
	get_public_ip
fi

exit 0;
